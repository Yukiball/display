"use strict";(self.webpackChunkdisplay=self.webpackChunkdisplay||[]).push([[341],{927:(n,s,a)=>{a.r(s),a.d(s,{comp:()=>l,data:()=>c});var p=a(641);const e=[(0,p.Fv)('<h1 id="æ‰‹å†™-promise" tabindex="-1"><a class="header-anchor" href="#æ‰‹å†™-promise"><span>æ‰‹å†™ Promise</span></a></h1><h2 id="promise-ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#promise-ç®€ä»‹"><span>Promise ç®€ä»‹</span></a></h2><p>ç›¸ä¿¡å¤§å®¶å¯¹ Promise å¹¶ä¸é™Œç”Ÿã€‚é™Œç”Ÿçš„äººè¯·çœ‹é˜®å¤§ä½¬å†™çš„<a href="https://es6.ruanyifeng.com/#docs/promise" target="_blank" rel="noopener noreferrer">es6æƒå¨æŒ‡å—promise</a> Promise æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥è§£å†³æ›¾ç»å›è°ƒåœ°ç‹±ç­‰é—®é¢˜ã€‚ Promise å¯¹è±¡æœ‰ä¸¤ä¸ªç‰¹ç‚¹ã€‚ä¸€ä¸ªæ˜¯å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“ã€‚å¦ä¸€ä¸ªæ˜¯ä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥å¾—åˆ°è¿™ä¸ªç»“æœã€‚ Promise çš„å®ä¾‹ä¸Šæ‹¥æœ‰å¾ˆå¤šå¾ˆå¤šçš„æ–¹æ³•ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥é€æ­¥æ‰‹å†™ä¸€ä¸ªç¬¦åˆA+è§„èŒƒçš„ PromiseğŸ˜‰ã€‚</p><h2 id="å¼€å§‹æ‰‹å†™" tabindex="-1"><a class="header-anchor" href="#å¼€å§‹æ‰‹å†™"><span>å¼€å§‹æ‰‹å†™</span></a></h2><h3 id="æ­æ¡†æ¶" tabindex="-1"><a class="header-anchor" href="#æ­æ¡†æ¶"><span>æ­æ¡†æ¶</span></a></h3><p>é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ï¼Œé™¤äº†thenã€catchã€finallyæ˜¯å®šä¹‰åœ¨Promiseçš„åŸå‹ä¸Šçš„æ–¹æ³•ä»¥å¤–ï¼Œå…¶ä»–çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯å®ƒçš„å®ä¾‹æ–¹æ³•ï¼ˆå¯ä»¥é€šè¿‡hasOwnPropertyè·å–ä¸‹è¯•è¯•çœ‹ï½ï¼‰ã€‚çŸ¥é“äº†è¿™ä¸ªæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹æ­å»ºPromiseæ¡†æ¶äº†ã€‚</p><p>å¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»¬å·²ç»æ­å»ºå¥½äº†ä¸€ä¸ªç®€æ˜“Promiseæ¡†æ¶ã€‚åé¢æ‰€æœ‰çš„æ”¹åŠ¨éƒ½å°†åœ¨è¿™ä¸ªæ¡†æ¶ä¸Šé¢å»å¡«å……ã€‚</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"></span>\n<span class="line"><span class="token keyword">const</span> <span class="token constant">PENDING</span> <span class="token operator">=</span> <span class="token string">&#39;pending&#39;</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">const</span> <span class="token constant">FULFILLED</span> <span class="token operator">=</span> <span class="token string">&#39;fulfilled&#39;</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">const</span> <span class="token constant">REJECTED</span> <span class="token operator">=</span> <span class="token string">&#39;rejected&#39;</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">class</span> <span class="token class-name">myPromise</span> <span class="token punctuation">{</span></span>\n<span class="line">  resolve<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span></span>\n<span class="line">  reject<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span></span>\n<span class="line">  all<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span></span>\n<span class="line">  race<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span></span>\n<span class="line">  allSettled<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span> <span class="token comment">//ES2020</span></span>\n<span class="line">  <span class="token builtin">any</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span> <span class="token comment">// ES2021</span></span>\n<span class="line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>resolve <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>reject <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>all <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>race <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>allSettled <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token builtin">any</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;then&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;catch&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;finally&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å¼€å§‹å¡«å……å†…å®¹" tabindex="-1"><a class="header-anchor" href="#å¼€å§‹å¡«å……å†…å®¹"><span>å¼€å§‹å¡«å……å†…å®¹</span></a></h3><p>åœ¨å¡«å……ä¹‹å‰æˆ‘ä»¬è¦å…ˆäº†è§£promiseçš„åŸºç¡€ç”¨æ³•</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// ... some code</span></span>\n<span class="line"></span>\n<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token comment">/* å¼‚æ­¥æ“ä½œæˆåŠŸ */</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>\n<span class="line">    <span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// success</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// failure</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',11)],t={},l=(0,a(262).A)(t,[["render",function(n,s){return(0,p.uX)(),(0,p.CE)("div",null,e)}]]),c=JSON.parse('{"path":"/myPromise.html","title":"æ‰‹å†™ Promise","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"Promise ç®€ä»‹","slug":"promise-ç®€ä»‹","link":"#promise-ç®€ä»‹","children":[]},{"level":2,"title":"å¼€å§‹æ‰‹å†™","slug":"å¼€å§‹æ‰‹å†™","link":"#å¼€å§‹æ‰‹å†™","children":[{"level":3,"title":"æ­æ¡†æ¶","slug":"æ­æ¡†æ¶","link":"#æ­æ¡†æ¶","children":[]},{"level":3,"title":"å¼€å§‹å¡«å……å†…å®¹","slug":"å¼€å§‹å¡«å……å†…å®¹","link":"#å¼€å§‹å¡«å……å†…å®¹","children":[]}]}],"git":{"updatedTime":1720033471000,"contributors":[{"name":"yingxu.wang","email":"1354583681@qq.com","commits":1},{"name":"yukiball","email":"yukiball","commits":1}]},"filePathRelative":"myPromise.md"}')}}]);